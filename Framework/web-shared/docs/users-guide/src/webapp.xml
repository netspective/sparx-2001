<chapter>
	<title>Creating the Web Application</title>
    
    <section id="WebApp">
        <title>Overview</title>
        <para>
        A Web application is a collection of HTML/XML documents, Web components (servlets and JSP pages), and 
        other resources such as images and scripts in a directory structure. &product-name;
        provides the &framework-name; libraries to produce a web application that delivers dynamically 
        generated content. 
        It is recommended that the following directory structures are created when building 
        the web application (replace <filename class='directory'>web-app</filename> with
        the web application name):
        <itemizedlist>
            <listitem><para><filename class='directory'>web-app/Database</filename></para></listitem>
            <listitem><para><filename class='directory'>web-app/Site</filename>            </para></listitem>
            <listitem><para><filename class='directory'>web-app/Site/WEB-INF</filename></para></listitem>
            <listitem><para><filename class='directory'>web-app/Site/WEB-INF/classes</filename></para></listitem>
            <listitem><para><filename class='directory'>web-app/Site/WEB-INF/ui</filename></para></listitem>
            <listitem><para><filename class='directory'>web-app/Site/WEB-INF/sql</filename></para></listitem>
            <listitem><para><filename class='directory'>web-app/Site/WEB-INF/security</filename></para></listitem>
            <listitem><para><filename class='directory'>web-app/Site/WEB-INF/tld</filename></para></listitem>
        </itemizedlist>
        The two main configuration files, <filename class="conf">web-app/Site/WEB-INF/web.xml</filename> 
        and <filename class="conf">web-app/Site/WEB-INF/configuration.xml</filename>, must also exist for
        a web application using &framework-name; libraries.  
        </para>

    </section>
    <section id="Servlet">
        <title>Servlet</title>
        <para>
        A sophisticated Web application can consist of JSP pages, custom tags, JavaBeans components, and
        servlets. Although JSP pages can be used for most presentation purposes, there are some circumstances 
        such as low-level application functions that don't require frequent modification
        where servlets are more appropriate.  
        
        Thus &product-name; does not restrict the use of Servlets and fully supports both servlets and JSPs.
        Following the common web application atchitecture, all custom servlet Java classes must exist 
        under <filename class="directory">web-app/Site/WEB-INF/classes</filename> (if JAR files are used,
        they must exist under <filename class="directory">web-app/Site/WEB-INF/lib</filename> 
        directory). 
        
        Servlets are named and mapped in  <filename class="conf">Site/WEB-INF/web.xml</filename> 
        as shown below:
        <programlisting>
        <![CDATA[
    <servlet>
        <servlet-name>Navigator</servlet-name>
        <servlet-class>com.xaf.navigate.NavigateFileSystemServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Navigator</servlet-name>
        <url-pattern>/navigate/*</url-pattern>
    </servlet-mapping>        
        ]]>
        </programlisting>
        The above example is a built-in navigation servlet provided by &framework-name; and can be used
        to display directory listings.
        </para>
    </section>
    
    <section id="JSP">
        <title>Java Server Pages (JSP)</title>
        <para>
        All JSP files (or the directories in which they reside) must exist under 
        <filename class="directory">web-app/Site</filename> 
        directory. &product-name; provides several custom tags for use and they are defined
        in <filename class="conf">web-app/Site/WEB-INF/tld/xaf.tld</filename>:
            <variablelist>
                <title>Custom Tags</title>
                <varlistentry>
                    <term> <sgmltag class="starttag">xaf:dialog</sgmltag></term>                    
                    <listitem>
                        <para>
                        Represents a dialog defined in <filename class="conf">/WEB-INF/ui/dialogs.xml</filename>.
                        The following attributes are available: 
                        <itemizedlist>    
                            <listitem>
                                <para>                          
                                <sgmltag class="attribute">name</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>                         
                                <sgmltag class="attribute">source</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para> 
                                <sgmltag class="attribute">skin</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para> 
                                <sgmltag class="attribute">listener</sgmltag>
                                </para>
                            </listitem>
                        </itemizedlist>
                        Refer to <xref linkend="Using-Dialog"/> for details on how to use this custom tag.
                        
                        </para>
                    </listitem>
                </varlistentry>    
                <varlistentry>
                    <term> <sgmltag class="starttag">xaf:query</sgmltag></term>                    
                    <listitem>
                        <para>
                        Represents a static query defined in <filename class="conf">/WEB-INF/sql/statements.xml</filename>.
                        The following attributes are available:
                        <itemizedlist>
                            <listitem>
                                <para>                        
                                <sgmltag class="attribute">name</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>                        
                                <sgmltag class="attribute">dataSource</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">stmtSource</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">report</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">skin</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">store</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">storeType</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">debug</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">listener</sgmltag>. 
                                </para>
                            </listitem>
                        </itemizedlist>
                        Refer to <xref linkend="Using-Query"/>
                        for details on how to use this custom tag.
                        
                        </para>
                    </listitem>
                </varlistentry>          
                <varlistentry>
                    <term> <sgmltag class="starttag">xaf:dml</sgmltag></term>                    
                    <listitem>
                        <para>
                        Represents a data manipulating action such as inserts, deletes, and modifications.
                        The following attributes are available:
                        <itemizedlist>
                            <listitem>
                                <para>                        
                                <sgmltag class="attribute">name</sgmltag>
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">dataSource</sgmltag>
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">debug</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>                                
                                <sgmltag class="attribute">command</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">table</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">fields</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">columns</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">where</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>                        
                                <sgmltag class="attribute">context</sgmltag>, 
                                </para>
                            </listitem>
                            <listitem>
                                <para>                                
                                <sgmltag class="attribute">insertchk</sgmltag>,
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">updatechk</sgmltag>.
                                </para>
                            </listitem>
                        </itemizedlist>
                        Refer to <xref  linkend="DML"/> for details on how to use this custom tag.
                        </para>
                    </listitem>
                </varlistentry>                      
               <varlistentry>
                    <term> <sgmltag class="starttag">xaf:transaction</sgmltag></term>                    
                    <listitem>
                        <para>
                        Represents a database transaction. The following attributes are available:
                        <sgmltag class="attribute">dataSource</sgmltag>.
                        </para>
                    </listitem>
                </varlistentry>     
               <varlistentry>
                    <term> <sgmltag class="starttag">xaf:query-select-dialog</sgmltag></term>                    
                    <listitem>
                        <para>
                        Represents a dynamic query definition dialog.
                        The following attributes are available:
                        <itemizedlist>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">name</sgmltag>:&nbsp;
                                Name of the <sgmltag class="starttag">select-dialog</sgmltag> defined in the 
                                <filename class="conf">web-app/Site/WEB-INF/sql/statement.xml</filename>
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                <sgmltag class="attribute">source</sgmltag>:&nbsp;
                                </para>
                            </listitem>
                            <listitem>
                                <sgmltag class="attribute">skin</sgmltag>:&nbsp;
                                Name of the skin defined in the <filename class="conf">web-app/Site/WEB-INF/ui/dialog.xml</filename>
                            </listitem>
                        </itemizedlist>
                        Refer to <xref linkend="Using-Dynamic-Query"/> for details on how to use this custom tag.
                        </para>
                    </listitem>
                </varlistentry>   
            </variablelist>
        </para>
    </section>

</chapter>