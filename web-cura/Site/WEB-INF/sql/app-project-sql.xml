<?xml version="1.0"?>

<xaf>
	<sql-statements package="project">
        <statement name="information">
            select
                project_id,
                project_name,
                project_descr
            from
                project
            where
                project_id = ?
            <report heading="Overview">
				<banner>
                    <item caption="Edit" url="config-expr:index.jsp?cmd=dialog,project.registration,edit&amp;project_id=${request:project_id}"/>
                    <item caption="Delete" url="config-expr:index.jsp?cmd=dialog,project.registration,delete&amp;project_id=${request:project_id}"/>
                </banner>
                <column heading="ID" align="left"/>
                <column heading="Name" align="left"/>
                <column heading="Description" align="left"/>
            </report>
            <params>
                <param value="request:project_id"/>
            </params>
        </statement>
        <statement name="member-persons">
            select
                name_last,
                name_first,
                org.org_name,
                rel_descr
            from
                person, project_relation, org
            where
                parent_id = ? and
                person.person_id = project_relation.rel_person_id and
                org.org_id = project_relation.rel_org_id
            <params>
                <param value="request:project_id"/>
            </params>
            <report heading="Project Members">
				<!-- banner>
                    <item caption="Add" url="config-expr:member.jsp?cmd=dialog,project.org_relation,add&amp;project_id=${request:project_id}"/>
                </banner -->
                <column heading="Last Name" align="left" url="config-expr:member.jsp?cmd=dialog,project.org_relation,edit&amp;project_id=${request:project_id}"/>
                <column heading="First Name" align="left"/>
                <column heading="Organization" align="left"/>
                <column heading="Relationship" align="left"/>
            </report>
        </statement>
		<statement name="available-orgs">
			select
                org.org_name,
                org.org_id
			from
                org, personorg_relationship por
			where
                por.parent_id = ?
                and por.record_status_id = 1  /* active status only */
                and por.rel_type = 0       /* member of organization */
                and por.rel_org_id = org.org_id /* join to get org_name */
            <params>
                <param value="request-attr:person_id"/>
            </params>
		</statement>
    </sql-statements>
</xaf>