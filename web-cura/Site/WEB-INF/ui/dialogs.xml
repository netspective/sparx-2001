<?xml version="1.0"?>
<xaf>
	<include file="test_dialogs.xml"/>
    <dialog-skin name="TestSkin">
        <outer-table-attrs>
            cellspacing='5' cellpadding='5' border='5'
        </outer-table-attrs>
        <frame-head-row-attrs>
            bgcolor='#6495ed'
        </frame-head-row-attrs>
        <caption-cell-attrs>
            style='font-family: Andale Mono'
        </caption-cell-attrs>
    </dialog-skin>

    <dialog-skin name="default">
        <outer-table-attrs>
            cellspacing='0' cellpadding='1' border='0' bgcolor='#3D6A26'
        </outer-table-attrs>
        <inner-table-attrs>
            width='100%' cellspacing='0' cellpadding='3' border='0' bgcolor='#F4FAF1'
        </inner-table-attrs>
        <frame-head-row-attrs>
            bgcolor='#AFD997' colspan='2'
        </frame-head-row-attrs>
        <frame-head-font-attrs>
            face='Arial' color='#ffffff' style='font-size: 12px'
        </frame-head-font-attrs>
        <caption-cell-attrs>
            align='right'  valign='top'
        </caption-cell-attrs>
        <caption-font-attrs>
            face='Verdana, Arial' style='font-size: 11px'
        </caption-font-attrs>
        <separator-font-attrs>
            face='Trebuchet MS' color='#6495ed' style='font-size: 12px'
        </separator-font-attrs>
        <control-area-font-attrs>
            face='Trebuchet MS,Arial' style='font-size: 12px'
        </control-area-font-attrs>
        <control-area-style-attrs>
            style='font-size: 12px; background-color: #F4F8FA'
        </control-area-style-attrs>
        <hint-font-attrs>
            color='navy' face='Arial' style='font-size: 10px'
        </hint-font-attrs>
        <field-row-error-attrs>
            bgcolor='#c4d6ec'
        </field-row-error-attrs>
        <grid-caption-font-attrs>
            face="Trebuchet MS,Arial" style='color: #0000CC; font-size: 12px; font-weight: bold'
        </grid-caption-font-attrs>
        <!-- grid-row-caption-font-attrs>
            size='+4'
        </grid-row-caption-font-attrs -->
        <grid-cell-attrs>
            align='left'
        </grid-cell-attrs>
        <grid-caption-cell-attrs>
            align='center' style='background-color: #c4d6ec'
        </grid-caption-cell-attrs>
        <grid-table-attrs>
            cellpadding='3' cellspacing='0' border='0'
        </grid-table-attrs>
        <!-- include-pre-script src="/test/script.js"/ -->
        <!-- include-post-script src="/test/script-post.js"/ -->
        <!-- prepend-pre-script> value = "this"; </prepend-pre-script -->
        <!--append-post-script> alert(activeDialog);   </append-post-script -->
    </dialog-skin>

	<dialogs package="org">
		<dialog name="registration" heading="create-data-cmd-heading:Account" retain-params="org_id">
			<field.debug visible="no"/>
			<field.text name="org_code" caption="Account Code" required="yes"/>
			<field.text name="org_name" caption="Name" required="yes"/>
			<field.text name="org_abbrev" caption="Abbreviation"/>
			<field.select name="org_type" caption="Type" choices="schema-enum:Org_Type_Enum">
				<conditional action="apply-flag" flag="invisible" data-cmd="edit,delete"/>
			</field.select>
			<field.select name="org_industry" caption="Industry" choices="schema-enum:Org_Industry_Enum">
				<conditional action="apply-flag" flag="invisible" data-cmd="edit,delete"/>
			</field.select>
			<field.select name="ownership" caption="Ownership" choices="schema-enum:Org_Ownership"/>
			<field.text name="ticker_symbol" caption="Ticker Symbol"/>
			<field.integer name="employees" caption="Employees"/>
			<field.select name="time_zone" caption="Time Zone" choices="Central;Eastern;Mountain;Pacific"/>
			<populate-tasks data-cmd="edit,delete">
				<exec-statement report="none" store-type="row-fields" store="form:*">
					select * from org where org_id = ?
					<params>
						<param value="request:org_id"/>
					</params>
				</exec-statement>
			</populate-tasks>
			<execute-tasks data-cmd="add">
				<exec-transaction command="begin"/>
				<exec-dml command="insert" table="org" auto-inc="org_id,org_org_id_seq" auto-inc-store="request-attr:org_id" fields="org_code,org_name,org_abbrev,ownership,ticker_symbol,employees,time_zone"/>
				<exec-dml command="insert" table="org_industry" columns="org_id=request-attr:org_id,system_id=custom-sql:oind_system_id_seq.nextval" fields="org_industry"/>
				<exec-dml command="insert" table="org_type" columns="org_id=request-attr:org_id,system_id=custom-sql:otyp_system_id_seq.nextval" fields="org_type"/>
				<exec-transaction command="end"/>
				<exec-redirect url="config-expr:${create-app-url:/account/home.jsp}?org_id=${request-attr:org_id}"/>
			</execute-tasks>
			<execute-tasks data-cmd="edit">
				<exec-dml command="update" table="org" fields="org_code,org_name,org_abbrev,ownership,ticker_symbol,employees,time_zone" where="org_id = ?" where-bind="request:org_id"/>
				<exec-redirect url="config-expr:${create-app-url:/account/home.jsp}?org_id=${request:org_id}"/>
			</execute-tasks>
			<execute-tasks data-cmd="delete">
				<exec-transaction command="begin"/>
				<exec-dml command="delete" table="org_industry" where="org_id = ?" where-bind="request:org_id"/>
				<exec-dml command="delete" table="org_type" where="org_id = ?" where-bind="request:org_id"/>
				<exec-dml command="delete" table="org" where="org_id = ?" where-bind="request:org_id"/>
				<exec-transaction command="end"/>
				<exec-redirect url="create-app-url:/account"/>
			</execute-tasks>
		</dialog>
	</dialogs>
	<dialogs package="train">
		<dialog name="test" heading="Add Account">
			<field.text name="org_code" caption="Account Code" required="yes" default="request:myval"/>
			<field.select name="org_type" caption="Type" style="multidual" choices="query:org.enum-types-all"/>
			<field.integer name="employees" caption="Employees" min="10" max="20"/>
		</dialog>
	</dialogs>
</xaf>
